(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{133:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return p})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return d}));var a=n(1),r=n(9),i=(n(0),n(143)),o={id:"validation",title:"Validation",sidebar_label:"Validation"},p={id:"validation",title:"Validation",description:"To ensure good data quality, the Mapping mediator implements a validation middleware layer. This middleware layer will validate the user's input before mapping the output object. Applying the validation middleware is recommended but optional. The level of validation is completely configurable by the user. Any fields that don't require validation can be left out of the validation schema.",source:"@site/docs/validation.md",permalink:"/openhim-mediator-mapping/docs/validation",editUrl:"https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/validation.md",sidebar_label:"Validation",sidebar:"someSidebar",previous:{title:"Endpoints",permalink:"/openhim-mediator-mapping/docs/endpoints"},next:{title:"Orchestrations",permalink:"/openhim-mediator-mapping/docs/orchestration"}},l=[],c={rightToc:l};function d(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"To ensure good data quality, the Mapping mediator implements a validation middleware layer. This middleware layer will validate the user's input before mapping the output object. Applying the validation middleware is recommended but optional. The level of validation is completely configurable by the user. Any fields that don't require validation can be left out of the validation schema."),Object(i.b)("p",null,"For the validation, the module ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/ajv"}),"AJV")," is used. The validation schema has to be defined in a file named ",Object(i.b)("inlineCode",{parentName:"p"},"input-validation.json")," within your created subdirectory within ",Object(i.b)("inlineCode",{parentName:"p"},"/endpoints"),". By default, the values of the user's input properties can be set to ",Object(i.b)("inlineCode",{parentName:"p"},"nullable"),". To prevent any ",Object(i.b)("inlineCode",{parentName:"p"},"null")," values passing validation supply the following environment variable ",Object(i.b)("strong",{parentName:"p"},"VALIDATION_ACCEPT_NULL_VALUES=false")," on app start up. Below is an example of the validation schema."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "type": "object",\n  "properties": {\n    "name": {"type": "string"},\n    "surname": {"type": "string", "nullable": true},\n    "emails": {"type": "array", "items": {"type": "string", "format": "email"}},\n    "date": {"type": "string", "format": "date-time"},\n    "id": {"type": "string", "format": "uuid"},\n    "jobs": {\n      "type": "object",\n      "properties": {"marketing": {"type": "string"}},\n      "required": ["marketing"]\n    }\n  },\n  "required": ["name", "id", "emails"]\n}\n')),Object(i.b)("p",null,"Data types such as ",Object(i.b)("inlineCode",{parentName:"p"},"date"),", ",Object(i.b)("inlineCode",{parentName:"p"},"email"),", ",Object(i.b)("inlineCode",{parentName:"p"},"uuid"),", etc. all inherit the type ",Object(i.b)("inlineCode",{parentName:"p"},"string"),". To specify the type, use the keyword ",Object(i.b)("inlineCode",{parentName:"p"},"format")," as seen above."),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"The ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/epoberezkin/ajv/blob/master/KEYWORDS.md#format"}),"formats")," that are supported are: ",Object(i.b)("strong",{parentName:"p"},"date"),", ",Object(i.b)("strong",{parentName:"p"},"date-time"),", ",Object(i.b)("strong",{parentName:"p"},"uri"),", ",Object(i.b)("strong",{parentName:"p"},"email"),", ",Object(i.b)("strong",{parentName:"p"},"hostname"),", ",Object(i.b)("strong",{parentName:"p"},"ipv6")," and ",Object(i.b)("strong",{parentName:"p"},"regex"),". More validation rules are available ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/ajv#validation-keywords"}),"here"))))}d.isMDXComponent=!0},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),d=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):p({},t,{},e)),n},s=function(e){var t=d(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),s=d(n),b=a,u=s["".concat(o,".").concat(b)]||s[b]||m[b]||i;return n?r.a.createElement(u,p({ref:t},c,{components:n})):r.a.createElement(u,p({ref:t},c))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=b;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:a,o[1]=p;for(var c=2;c<i;c++)o[c]=n[c];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);