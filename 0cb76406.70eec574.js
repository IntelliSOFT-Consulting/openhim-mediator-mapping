(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{121:function(e,t,a){"use strict";var n=a(1),i=a(0),o=a.n(i),s=a(124),r=a.n(s),p=a(122),l=a(133);class m extends i.Component{constructor(e){super(e),this.state={data:null,spinner:!0,url:e.url.replace("<VERSION>",e.version)}}componentWillMount(){r.a.get(this.state.url).then(e=>{e.data?this.setState({data:e.data,spinner:!1}):this.setState({data:null,spinner:!1})}).catch(e=>{console.error(e.toString()),this.setState({data:null,spinner:!1})})}render(){return this.state.spinner?o.a.createElement("div",{className:"spinnerContainer"},o.a.createElement("div",{id:"loading"})):this.state.data?o.a.createElement(p.a,Object(n.a)({},p.b,{theme:l.a,code:this.state.data,language:`${this.props.language}`}),({className:e,style:t,tokens:a,getLineProps:n,getTokenProps:i})=>o.a.createElement("pre",{className:e,style:t},a.map((e,t)=>o.a.createElement("div",n({line:e,key:t}),e.map((e,t)=>o.a.createElement("span",i({token:e,key:t}))))))):o.a.createElement("div",null,"File not found...")}}t.a=m},90:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return m})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return d}));var n=a(1),i=a(6),o=(a(0),a(109)),s=a(119),r=a(120),p=a(121),l={id:"bahmni-fhir-transform",title:"Bahmni to FHIR transformation",sidebar_label:"Bahmni to FHIR transformation"},m={id:"samples/bahmni-fhir-transform",title:"Bahmni to FHIR transformation",description:"import Tabs from '@theme/Tabs';",source:"@site/docs/samples/bahmni-fhir-transform.md",permalink:"/openhim-mediator-mapping/docs/samples/bahmni-fhir-transform",editUrl:"https://github.com/jembi/openhim-mediator-mapping/edit/master/docs/docs/samples/bahmni-fhir-transform.md",sidebar_label:"Bahmni to FHIR transformation",sidebar:"someSidebar",previous:{title:"DHIS2 Facility Lookup",permalink:"/openhim-mediator-mapping/docs/samples/dhis2-lookup"}},c=[{value:"Setup",id:"setup",children:[]},{value:"Config",id:"config",children:[]},{value:"Testing",id:"testing",children:[]},{value:"Outcome",id:"outcome",children:[]}],b={rightToc:c};function d(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This sample endpoint demonstrates how to perform validation/transformation on an incoming Bahmni Patient object and construct a new output object as a FHIR Patient resource"),Object(o.b)("h2",{id:"setup"},"Setup"),Object(o.b)("p",null,"Before we can continue with the sample endpoint configuration, we need to ensure we have followed the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/openhim-mediator-mapping/docs/setup"}),"getting started")," steps so that we have a working version of the mapping mediator."),Object(o.b)("p",null,"Copy the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jembi/openhim-mediator-mapping/tree/master/samples/endpoints/bahmni"}),"bahmni")," directory to the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jembi/openhim-mediator-mapping/tree/master/endpoints"}),"endpoints")," directory."),Object(o.b)("p",null,"The server will require a restart for the new endpoint files to be initialized and the endpoint successfully created "),Object(o.b)("h2",{id:"config"},"Config"),Object(o.b)("p",null,"Below are the various endpoint configuration files that was copied into the ",Object(o.b)("inlineCode",{parentName:"p"},"endpoints/bahmni")," directory."),Object(o.b)(s.a,{defaultValue:"metadata",values:[{label:"Metadata",value:"metadata"},{label:"Constants",value:"constants"},{label:"Input Validation",value:"input-validation"},{label:"Input Mapping",value:"input-mapping"}],mdxType:"Tabs"},Object(o.b)(r.a,{value:"metadata",mdxType:"TabItem"},Object(o.b)(p.a,{url:"https://raw.githubusercontent.com/jembi/openhim-mediator-mapping/master/samples/endpoints/bahmni/constant.json",language:"json",mdxType:"ExternalContentSyntaxHighlighter"})),Object(o.b)(r.a,{value:"constants",mdxType:"TabItem"},Object(o.b)(p.a,{url:"https://raw.githubusercontent.com/jembi/openhim-mediator-mapping/master/samples/endpoints/bahmni/constant.json",language:"json",mdxType:"ExternalContentSyntaxHighlighter"})),Object(o.b)(r.a,{value:"input-validation",mdxType:"TabItem"},Object(o.b)(p.a,{url:"https://raw.githubusercontent.com/jembi/openhim-mediator-mapping/master/samples/endpoints/bahmni/constant.json",language:"json",mdxType:"ExternalContentSyntaxHighlighter"})),Object(o.b)(r.a,{value:"input-mapping",mdxType:"TabItem"},Object(o.b)(p.a,{url:"https://raw.githubusercontent.com/jembi/openhim-mediator-mapping/master/samples/endpoints/bahmni/constant.json",language:"json",mdxType:"ExternalContentSyntaxHighlighter"}))),Object(o.b)("h2",{id:"testing"},"Testing"),Object(o.b)("p",null,"Once all the relevant configuration has been completed and the endpoint has been successfully initialized on server start up, we can proceed with testing our ",Object(o.b)("inlineCode",{parentName:"p"},"bahmni")," endpoint by following the below steps."),Object(o.b)("p",null,"We will be using a basic ",Object(o.b)("inlineCode",{parentName:"p"},"curl")," command to send our request to the mapping mediator but any other client could be used to achieve the same result."),Object(o.b)("h4",{id:"step-1"},"Step 1"),Object(o.b)("p",null,"Create a file called ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/jembi/openhim-mediator-mapping/tree/master/samples/inputData/bahmniPatient.json"}),"data.json")," in any directory of your choosing. This file will contain the payload data we will be sending as part of our request"),Object(o.b)(p.a,{url:"https://github.com/jembi/openhim-mediator-mapping/tree/master/samples/inputData/bahmniPatient.json",language:"json",mdxType:"ExternalContentSyntaxHighlighter"}),Object(o.b)("h4",{id:"step-2"},"Step 2"),Object(o.b)("p",null,"execute the below command to send the curl request to your mapping mediator instance"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-curl"}),'curl -X POST -H "Content-Type: application/json" -H "Content-Length: 0" -d @data.json http://localhost:3003/bahmni\n')),Object(o.b)("h2",{id:"outcome"},"Outcome"),Object(o.b)("p",null,"Once the request has been successfully triggered and processed by the mapping mediator you should be getting a ",Object(o.b)("inlineCode",{parentName:"p"},"200")," response code back as well as the below response data."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'{\n  "some": "sample JSON"\n}\n')))}d.isMDXComponent=!0}}]);